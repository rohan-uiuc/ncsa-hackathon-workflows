 # Astronomy Question Sets

## Overview
This is a list of questions for varying difficulty to attempt with your AI system. Some questions require access to online databases, and others to static text files. 
Some of these concepts can be rather intensive into astronomy - after all, AI has proven to be pretty good so we want to try to challenge it!

TASK FOR HACKATHON:
Find answers for the following questions and subsets. 

## Question #1: Molecular Tracers:
Prompt your code to return all equations in LaTeX:

Derive a definition of the critical density, and use it to compute some critical densities for important molecular transitions.
For the purposes of this problem, you will need to know some basic parameters (such as energy levels and Einstein coefficients) of common interstellar molecules. 
You can obtain these from the Leiden Atomic and Molecular Database https://home.strw.leidenuniv.nl/~moldata/.

1a. Consider an excited state "i" of some molecule, and let A_{ij} and k_{ij} be the Einstein A coefficient and the collision rate, respectively, for transitions from state i to state j. 
Return the LaTeX equation expressions for the rates of spontaneous radiative and collisional de-excitations out of state i in a gas where the number density of collision partners is n.

Answer 1a (LaTeX): 
    
The radiative de-excitation rate is
\begin{displaymath}
\left(\frac{dn_i}{dt}\right)_{\rm spon.\,emiss.} = -n_i \sum_{j<i} A_{ij} .
\end{displaymath}

The collisional de-excitation rate is
\begin{displaymath}
\left(\frac{dn_i}{dt}\right)_{\rm coll.} = -n n_i \sum_{j<i} k_{ij}.
\end{displaymath}


1b. Define the critical density n_crit of a state as the density for which the spontaneous radiative and collisional de-excitation rates are equal. 
There is some ambiguity in this definition.
Some people define the critical density as the density for which the rate of radiative de-excitation equals the rate of all collisional transitions out of a state, not just the rate of collisional de-excitations out of it. In practice this usually makes little difference. Using your answer to the previous part, derive an expression for n_crit in terms of the Einstein coefficient and collision rates for the state. 

Answer 1b:

Setting the results from the previous part equal and solving, we obtain:
    
\begin{displaymath}
 n_i \sum_{j<i} A_{ij} = n_{\rm crit} n_i \sum_{j<i} k_{ij} 
 \qquad \Longrightarrow \qquad
 n_{\rm crit} = \frac{\sum_{j<i} A_{ij}}{\sum_{j<i} k_{ij}}.
 \end{displaymath}


1c. When a state has a single downward transition that is far more common than any other one, as is the case for example for the rotational excitation levels of CO, it is common to refer to the critical density of the upper state of the transition as the critical density of the line. Compute critical densities for the following lines: CO J=1→0, CO J=3→2, CO J=5→4, and HCN J=1→0, using H2 as a collision partner. 
    Perform your calculation for the most common isotopes: C^12, O^16, and N^14. Assume the gas temperature is 10 K, the H2 molecules are all para-H2, and neglect hyperfine splitting.

Answer 1c: 
   
Using numbers taken from the \href{http://www.strw.leidenuniv.nl/~moldata}{LAMBDA} website\footnote{Collision rates are
sufficiently uncertain that the rate coefficients listed in the
database are periodically updated as new calculations or experiments
are performed. The numerical values given here were computed using
collision rate coefficients retrieved on 10 August 2016.} for the $A_{ij}$ and $k_{ij}$ values, we have
\begin{center}
\begin{tabular}{c|c}
Line & $n_{\rm crit}$ [cm$^{-3}$] \\ \hline
CO($J=1\rightarrow 0$) & $2.2\times 10^3$ \\
CO($J=3\rightarrow 2$) & $1.9 \times 10^4$ \\
CO($J=5\rightarrow 4$) & $7.8\times 10^4$ \\
HCN($J=1\rightarrow 0$) & $1.0\times 10^6$
\end{tabular}
\end{center}

1d. Consider a molecular cloud in which the volume-averaged density is n=100 cm^-3. Assuming the cloud has a lognormal density distribution as given by equation (\ref{eq:denpdf}), with a dispersion σ_s^2 = 5.0, compute the fraction of the cloud mass that is denser than the critical density for each of these transitions. Which transitions are good tracers of the bulk of the mass in a cloud?
Which are good tracers of the denser, and thus presumably more actively star-forming, parts of the cloud?


Answer 1d: 
    
The fraction of the mass above some specified density $\rho_c$ can be obtained by integrating the PDF for mass:
\begin{equation}
f_M(\rho > \rho_0) = \frac{\int_{s_c}^\infty p_M(s) \, ds}{\int_{-\infty}^{\infty} p_M(s) \, ds}
\end{equation}
where $s_c = \ln(\rho_c/\overline{\rho})$ and the mass PDF is
\begin{equation}
p_M = \frac{1}{\sqrt{2\pi \sigma_s^2}} \exp\left[-\frac{(s+s_0)^2}{2\sigma_s^2}\right]
\end{equation}
with $s_0 = -\sigma_s^2/2$. Using the critical densities obtained in the previous part to compute $s_c$, and then to evaluate the integral, we obtain
\begin{center}
\begin{tabular}{c|c|c}
Line & $s_c$ & $f_M(n>n_{\rm crit})$ \\ \hline
CO($J=1\rightarrow 0$) & $3.1$ & 0.39 \\
CO($J=3\rightarrow 2$) & $5.2$ & 0.11 \\
CO($J=5\rightarrow 4$) & $6.6$ & 0.032 \\
HCN($J=1\rightarrow 0$) & $9.2$ & $0.0013$
\end{tabular}
\end{center}
It appears that CO($J=1\rightarrow 0$) and (to some extent) CO($J=3\rightarrow 2$) are good tracers of the bulk of the mass, while CO($J=5\rightarrow 4$) and HCN($J=1\rightarrow 0$) are better tracers of the denser parts of the cloud.

Question #1 Reference / Citation
Structure/Source: https://github.com/Open-Astrophysics-Bookshelf/star_formation_notes/blob/master/problems/probset1.tex

~~~~~~~~~~~
## Question #2: Using Living Online Astronomy Datasets 

Dataset is found here: https://lasp.colorado.edu/lisird/data/tsis_tsi_6hr
(You will need to click "Download" for the .txt file.)

Background:
There is currently a outeratmospeheric NASA space mission dedicated to taking routine measurements of stellar flux called the "Total and Spectral Solar Irradiance Sensor"

Question: Using the text file TSIS-1 6-hour mission data return:

- the maximum solar flux
- minimum flux 
- average flux value over the last 

Answer the question: Is the assumption that the Sun’s flux is constant over human timescales accurate?
Question Source: Astronomy 404 Homework, University of Illinois Astronomy Dept. 

~~~~~~~~~~~
## Question #3: Collapsing Protostellar Core

Situation: Consider a collapsing protostellar core that delivers mass to an accretion disk at its center at a constant mass-change rate $\dot{M}_d$.
A fraction $f$ of the mass that reaches the disk is ejected (lost) through a jet outflow,
and the remainder goes onto a protostar at the center of the disk.
The material ejected into the outflow is launched at a velocity equal to the escape speed from the stellar surface.
The protostar has a constant radius $R_*$ as it grows.

Question 3a:
Compute the momentum per unit stellar mass ejected by the outflow in the process of forming a star of final mass $M_$.
Take $f=0.1$,
$M_ = 0.5$ $\text{M}\odot$,
and $R* = 3$ $\text{R}\odot$.


Answer 3a:
The escape speed at the stellar surface, and thus the launch velocity of the wind, is $v_w = \sqrt{2G M_*(t)/R_*}$, where $M_*(t)$ is the star's instantaneous mass. The momentum flux associated with the wind is therefore $\dot{p}_w = f \dot{M}_d v_w$. The accretion rate onto the star is $\dot{M}_* = (1-f) \dot{M}_d$. Thus at a time $t$ after the star has started accreting, we have $M_*(t) = (1-f) \dot{M}_d t$, and
\begin{displaymath}
\dot{p}_w = f (1-f)^{1/2} \dot{M}_d^{3/2} \left(\frac{2G}{R_*}\right)^{1/2} t^{1/2}.
\end{displaymath}
The time required to accrete up to the star's final mass is $t_f = M_*/\dot{M}_* = (1-f)^{-1} M_*/\dot{M}_d$, where $M_*$ is the final mass. To obtain the wind momentum per unit stellar mass, we must integrate $\dot{p}_w$ over the full time it takes to build up the star, then divide by the star's mass. Thus we have
\begin{eqnarray*}
\langle p_w\rangle & = & \frac{1}{M_*} \int_0^{(1-f)^{-1} M_*/\dot{M}_d} f (1-f)^{1/2} \dot{M}_d^{3/2} \left(\frac{2G}{R_*}\right)^{1/2} t^{1/2}\, dt \\
& = & \frac{2}{3} \frac{f}{1-f} \sqrt{\frac{2 G M_*}{R_*}}.
\end{eqnarray*}

Evaluating numerically for the given values of $f$, $M_*$, and $R_*$ gives $\langle p_w\rangle = 19$ km s$^{-1}$ $\msun^{-1}$.


Question 3b: Considering the outflow's momentum conservation on large scales, relate its terminal velocity to the turbulent velocity dispersion $\sigma$ in the ambient cloud. If the cloud forms a star cluster of mass $M*$ with a constant star formation rate $\dot{M}{\text{cluster}}$, calculate the rate at which outflows inject kinetic energy into the cloud.

Answer 3b:
    
Each outflow carries momentum $\langle p_w\rangle M_*$, and thus when it decelerates to terminal velocity $\sigma$ the mass it has swept-up must be $M_w = (\langle p_w\rangle/\sigma) M_*$. The associated kinetic energy of a single outflow is 
\begin{displaymath}
\mathcal{T}_w = \frac{1}{2} M_w \sigma^2 = \frac{1}{2} M_* \langle p_w\rangle \sigma.
\end{displaymath}
If the total star formation rate is $\dot{M}_{\rm cluster}$, then the rate at which new stars form is $\dot{M}_{\rm cluster}/M_*$. The rate of kinetic energy injection is therefore
\begin{eqnarray*}
\dot{\mathcal{T}} & = & \frac{\dot{M}_{\rm cluster}}{M_*} \mathcal{T}_w \\
& = & \frac{1}{2} \dot{M}_{\rm cluster} \langle p_w\rangle \sigma \\
& = & \frac{1}{3}\left(\frac{f}{1-f}\right) \dot{M}_{\rm cluster} \sigma \sqrt{\frac{2 G M_*}{R_*}}.
\end{eqnarray*}


Question 3c: Let's apply Larson's relations to the cloud, relating its velocity dispersion, mass, and size.
Assuming turbulence decays exponentially on a timescale $t{\text{cr}}=L/\sigma$, determine the required star formation rate for energy injected by outflows to balance the energy lost via turbulence decay. Consider $L = 1, 10,$ and $100$ pc.

Answer 3c:
    
The decay time is $L/\sigma$, to the decay rate must be the cloud kinetic energy $(3/2) M \sigma^2$ divided by this time. Thus
\begin{displaymath}
\dot{\mathcal{T}}_{\rm dec} = -\frac{3}{2} \frac{M \sigma^3}{L}.
\end{displaymath}
If we now set $\dot{\mathcal{T}}_w = -\dot{\mathcal{T}}_{\rm dec}$, we can solve for $\dot{M}_{\rm cluster}$. Doing so gives
\begin{displaymath}
\dot{M}_{\rm cluster} = \frac{9}{2}\left(\frac{1-f}{f}\right) \sqrt{\frac{R_*}{2 G M_*}} \frac{\sigma^2}{L} M.
\end{displaymath}
Using the Larson relations to evaluate this, note that $\sigma^2/L = \sigma_1^2/\mbox{pc} \equiv a_c = 3.2\times 10^{-9}$ cm s$^{-1}$ is constant, and we are left with
\begin{displaymath}
\dot{M}_{\rm cluster} = \frac{9}{2}\left(\frac{1-f}{f}\right) \sqrt{\frac{R_*}{2 G M_*}} a_c M_1 \left(\frac{L}{\mbox{pc}}\right)^2.
\end{displaymath}
Evaluating numerically for the given values of $L$ produces the results below:
\begin{center}
\begin{tabular}{l|ccc}
& $L=1$ pc & $L = 10$ pc & $L = 100$ pc \\ \hline
$\dot{M}_{\rm cluster}$ [$\msun$ yr$^{-1}$] & $1.6\times 10^{-5}$ & $1.6\times 10^{-3}$ & $1.6\times 10^{-1}$
\end{tabular}
\end{center}


Question 3d. If stars form at the rate needed to maintain turbulence, what fraction of the cloud mass must convert into stars per cloud free-fall time? Given cloud density $\rho=M/L^3$, compute this fraction for $L = 1,10,$ and $100$ pc. Are these values plausible? When, if ever, is it acceptable to disregard the energy injected by protostellar outflows?

Answer 3d: 

The mass converted into stars in 1 free-fall time is $\dot{M}_{\rm cluster} t_{\rm ff}$, so the quantity we want to compute is
\begin{displaymath}
f = \frac{\dot{M}_{\rm cluster}}{M} t_{\rm ff} \equiv \frac{t_{\rm ff}}{t_*},
\end{displaymath}
where $t_*$ is the star formation timescale. From the previous part, we have
\begin{displaymath}
t_*^{-1} = \frac{\dot{M}_{\rm cluster}}{M} =  \frac{9}{2}\left(\frac{1-f}{f}\right) \sqrt{\frac{R_*}{2 G M_*}} a_c = 0.16\mbox{ Myr}^{-1}.
\end{displaymath}
The free-fall time is
\begin{eqnarray*}
t_{\rm ff} & = & \sqrt{\frac{3\pi}{32 G \rho}} = \sqrt{\frac{3\pi L^3}{32 G M}} = \sqrt{\frac{3\pi L_1^3}{32 G M_1}} \left(\frac{L}{L_1}\right)^{1/2} \\
& = & 0.81 \left(\frac{L}{L_1}\right)^{1/2}\mbox{ Myr},
\end{eqnarray*}
where $L_1 = 1$ pc. Thus we have
\begin{displaymath}
f = \frac{t_{\rm ff}}{t_*} = 0.13 \left(\frac{L}{L_1}\right)^{1/2}.
\end{displaymath}
Evaluating for $L = 1$, $10$, and $100$ pc, we get $f = 0.13$, $0.42$, and $1.3$, respectively. We therefore conclude that protostellar outflows may be a significant factor in the driving the turbulence on $\sim 1$ pc scales, and cannot be ignored there. However, they become increasingly less effective at larger size scales, and can probably be neglected at the scales of entire GMCs, $\sim 10-100$ pc.

Source for #3: https://github.com/Open-Astrophysics-Bookshelf/star_formation_notes/blob/master/problems/probsol2.tex

~~~~~~~~~~~~~~~~~

Questions 4 - __ are sourced from / inspired by: 

## Question #4: Light Travel Time

4a. From Earth, how far back in time are we seeing Neptune, when it is furthest from Earth in the two planet's orbits? 
Give your answer in hours and minutes.

4b. From Earth, how far back in time are we seeing Neptune when it is nearest to earth in the two planets orbits?
Give your answer in hours and minutes.

Answer 4:
    a. 4.3 hours, or 260 minutes

    b. 4 hours, or 240 minutes

~~~~~~~~~~~~~
## Question #5: Conceptual (Mathematics)

Apollo 11 astronauts left Earth's atmosphere at the speed of about 40,000 kilometers per hour on the Saturn V booster, the most powerful rocket ever launched - before or since. At that speed, how long would it take to travel to the moon?

Answer #5: Assuming constant velocity: 
    Constant: ~10 hours 
        
        d = 4 x 10^5 km
        v = 4 x 10^4 km/h 
    
NOTE: The Apollo 11 mission actually took about 3 days to reach the Moon, as the pull of Earths gravity meant that their speed decreased throughout the trip.

~~~~~~~~~~~~
## Question #6: Conceptual (Reasoning)

Consider whether pulsars could be white dwarfs. A typical white dwarf of one solar mass has a radius of about equal to that of Earth. What would be the speed (in meters per second) of a point on the rotational equator of such a white dwarf, if it were spinning with a period P of 1/600 second.
Are there any laws of physics that would prevent such speeds?

Answer 6:
    Equation: is v = 2*pi*r/ P = 2E10 m/s 

    Yes. The speed of light is 3E8 m/s, so it is physically impossible for an object as large as a white dwarf to spin this fast; it would require Lhat its surface
travel faster than Lhe speed of lighL!

~~~~~~~~~~~~
## Question #7 Conceptual (Reasoning)

An astronaut sits in the exact middle of his rocket ship and shines dual laser beams towards the front and back. He observed that they reached the front and back simultaneously. If he's moving past you with the speed of 60% light,
do you see both laser beams hitting the front back of his rocket simultaneously?

Answer #7: 
    No.


~~~~~~~~~~~~
## Question 8: Conceptual (Mathematics)
    
Situation: 
On September 14th, 2015, the Laser Interferometer Gravitational-Wave Observatory (LIGO) measured the signal for my pair of colliding black holes.
    The measured signal was a gravitational wave passing by the detector. In essence, LIGO uses lasers to measure very accurately the distance between pairs of mirrors separated by about four kilometers: as a gravitational wave goes by, that distance oscillates periodically by a tiny amount. Just before the two black holes collided, marked the peak of gravitational radiation.
        
The period of oscillations was .004 seconds (i.e, the frequency of about 250 Hz, corresponding to the middle C on a piano.) When the two black holes are brought to merge, their event horizons are touching each other, and they are in orbit around each other at close to the speed of light.

Use this information to estimate the mass of the black holes. Assume for simplicity that the two black holes have the same mass.
Express your answer in solar masses to a single significant figure."

Answer #8:
The orbit of each black hole is a circle of radius equal to its Schwarzschild radius, and thus the circumference of the orbit is equal to $2\pi$ times that. Its period is that distance divided by the speed of light:

\[ \text{Period} = \frac{0.004 \text{ sec}}{2\pi \times R_{\text{Schwarzchild}}}\]

The speed of light is $300,000$ kilometers per second, and using our usual approximation of $\pi = 3$, this simplifies to:

\[R_{\text{Schwarzchild}} = 200 \text{ kilometers}\]

We know that the Schwarzschild radius corresponding to a solar mass is about $3$ kilometers, and we have a number about $60$ times larger. So each black hole has a mass of $60$ solar masses.
In fact, a more accurate calculation using the equations of general relativity shows that we're off by a factor of $2$; the two black holes each have a mass of about $30$ solar masses.

~~~~~~~~~~~~
## Question #9: Concepts
What is the distance modulus equation?

Answer #9:  \text{Distance Modulus} = m - M = 5 \log_{10} \left( \frac{d}{10 \text{ pc}} \right)

Note to Hacker: there are several forms of this equation. Test your results with numerical values to ensure it matches the equation provided.


~~~~~~~~~~~~
Question #10: Reading Data

Which value on this datafile output cooresponds to Right Acension: 

SURVEY: PS1MD
SNID:  PSc000174
IAUC:    UNKNOWN
RA:         162.0294  deg
DECL:        56.8502  deg
MWEBV:  0.0076  +- 0.0000 MW E(B-V)
REDSHIFT_FINAL:  0.2440  +- 0.0000 CMB
SEARCH_PEAKMJD: 55212.0
FILTERS:    griz

Answer #10:
162.0294  deg




## Task for the hackathon
- Develop a workflow agent that takes in the input directory, checks if required files are present, creates the code for the pipeline, executes it and prompts user when a result is generated.

## Data
- Download data from shared GDrive https://drive.google.com/drive/folders/1mT5QSrH1sv20HYG2P7HDP9L1-KveDJmX
- List of images in `list` directory. Basically some text files.
- Fluxscale values are in files named `flx`
- Weight values are in files named `wgt`
- Files after SWarp (another process not part of the pipeline) are named `sci`
- FITS images in `tan_nwgint` and `coadd` directory. Use DS9 to view the images
- Data contains images for bands i and r.
- The current scripts can process 5 light bands / colors : g,i,r,Y, and z. 

## Requirements
- Python 3.12+
- pip


## Usage
1. Activate virtual env
2. Install requirements
3. `python3 findoff.py -i "data/list/sci.i.list" -o "out/test.i.offset_b8" -v 1 --useTAN --fluxscale "data/list/flx.i.list"` .  
4. `python3 fitoff.py -i "out/test.i.offset_b8" -o "out/test.i.zoff_b8" -b -v 2`
5. `python3 zoff_apply.py -i "out/test.i.zoff_b8" --fluxscale "data/list/flx.i.list" -o "out/"`

Do not hard code the band (i,r) - all the scripts should run for all bands present in the dataset. The above python command is showing an example of running one input file.

## Useful info
- Astropy.org (https://www.astropy.org/)
- FITS files (https://docs.astropy.org/en/latest/io/fits/index.html)
- Use DS9 to view the FITS files (https://sites.google.com/cfa.harvard.edu/saoimageds9/download)
- SWarp program (https://www.astromatic.net/software/swarp/, https://github.com/astromatic/swarp)
- Coadd (https://wiki.eigenvector.com/index.php?title=Coadd)
- World Coordinate System (https://docs.astropy.org/en/latest/wcs/index.html)

## Acknowledgements
- Robert Gruendl, Sr. Research Scientist, NCSA.
- Dark Energy Survey https://des.ncsa.illinois.edu/, https://github.com/DarkEnergySurvey/despyastro

